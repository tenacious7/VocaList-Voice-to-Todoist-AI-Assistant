{
  "name": "My workflow 8",
  "nodes": [
    {
      "parameters": {
        "promptType": "define",
        "text": "={{ $json.text }}, REFERENCE_DATE = {{ $now.setZone('Asia/Kolkata').toFormat('yyyy-LL-dd') }}\n",
        "hasOutputParser": true
      },
      "id": "b3f10c38-b951-4e56-945c-baa61b8412a0",
      "name": "üß† AI Task Parser - by Brijesh",
      "type": "@n8n/n8n-nodes-langchain.chainLlm",
      "position": [
        -3968,
        -176
      ],
      "typeVersion": 1.5,
      "notes": "Core AI processing node by Brijesh - Takes transcribed text and converts it into structured task data with priority levels and due dates using LangChain LLM"
    },
    {
      "parameters": {
        "updates": [
          "message"
        ],
        "additionalFields": {}
      },
      "id": "029aefb0-534b-45d8-a89f-08fd22f3552e",
      "name": "üì± Telegram Listener - by Brijesh",
      "type": "n8n-nodes-base.telegramTrigger",
      "position": [
        -5232,
        -192
      ],
      "webhookId": "4e2cd560-ae4e-4ed7-a8ea-984518404e51",
      "typeVersion": 1.1,
      "credentials": {
        "telegramApi": {
          "id": "3Fn2wtk2Q5fLDMiJ",
          "name": "Telegram account 3"
        }
      },
      "notes": "Entry point by Brijesh - Listens for incoming messages from Telegram bot. Triggers the entire workflow when user sends voice or text messages"
    },
    {
      "parameters": {
        "rules": {
          "values": [
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "af30c479-4542-405f-b315-37c50c4e2bef",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "leftValue": "={{ $json.message.voice.file_id }}",
                    "rightValue": ""
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "Audio"
            },
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "a3ca8cd4-fbb2-40b5-829a-24724f2fbc85",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "leftValue": "={{ $json.message.text || \"\" }}",
                    "rightValue": ""
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "Text"
            },
            {
              "conditions": {
                "options": {
                  "version": 2,
                  "leftValue": "",
                  "caseSensitive": true,
                  "typeValidation": "strict"
                },
                "combinator": "and",
                "conditions": [
                  {
                    "id": "9bcfdee0-2f09-4037-a7b9-689ef392371d",
                    "operator": {
                      "type": "string",
                      "operation": "exists",
                      "singleValue": true
                    },
                    "leftValue": "error",
                    "rightValue": ""
                  }
                ]
              },
              "renameOutput": true,
              "outputKey": "Error"
            }
          ]
        },
        "options": {}
      },
      "id": "be8be939-8dba-49b3-a824-13b32b2153c7",
      "name": "üîÄ Message Router - by Brijesh",
      "type": "n8n-nodes-base.switch",
      "position": [
        -4880,
        -208
      ],
      "typeVersion": 3.2,
      "notes": "Smart routing logic by Brijesh - Determines if incoming message is voice, text, or error and routes to appropriate processing path"
    },
    {
      "parameters": {
        "resource": "file",
        "fileId": "={{ $json.message.voice.file_id }}"
      },
      "id": "9c7c37a9-2b96-40bb-80ea-c58a802f0ba0",
      "name": "üéôÔ∏è Voice Fetcher - by Brijesh",
      "type": "n8n-nodes-base.telegram",
      "position": [
        -4560,
        -208
      ],
      "webhookId": "23645237-4943-4c32-b18c-97c410cc3409",
      "typeVersion": 1.2,
      "notesInFlow": false,
      "notes": "Voice message handler by Brijesh - Downloads voice message file from Telegram servers using the file_id for further processing"
    },
    {
      "parameters": {
        "schemaType": "manual",
        "inputSchema": "{\n  \"$schema\": \"http://json-schema.org/draft-07/schema#\",\n  \"type\": \"array\",\n  \"items\": {\n    \"type\": \"object\",\n    \"properties\": {\n      \"content\":        { \"type\": \"string\" },\n      \"priority\":       { \"type\": \"integer\", \"minimum\": 1, \"maximum\": 4 },\n      \"due_date_time\":  { \"type\": \"string\" }\n    },\n    \"required\": [\"content\", \"priority\", \"due_date_time\"],\n    \"additionalProperties\": false\n  }\n}\n",
        "autoFix": true,
        "customizeRetryPrompt": true
      },
      "id": "8406e287-306d-4d73-8dae-5767423c7a02",
      "name": "üìã Task Structurer - by Brijesh",
      "type": "@n8n/n8n-nodes-langchain.outputParserStructured",
      "position": [
        -3840,
        160
      ],
      "typeVersion": 1.2,
      "notes": "JSON parser by Brijesh - Converts AI response into structured task format with content, priority (1-4), and due_date_time fields"
    },
    {
      "parameters": {
        "project": {
          "__rl": true,
          "value": "2357967597",
          "mode": "list",
          "cachedResultName": "Inbox"
        },
        "content": "={{ $json.output[0].content }}",
        "options": {
          "dueDateTime": "={{ $json.output[0].due_date_time }}",
          "priority": "={{ $json.output[0].priority }}"
        }
      },
      "id": "b9a368fd-decb-4245-8263-a0e5b83edc1c",
      "name": "‚úÖ Todoist Creator - by Brijesh",
      "type": "n8n-nodes-base.todoist",
      "position": [
        -3536,
        -176
      ],
      "typeVersion": 2.1,
      "notes": "Task creation by Brijesh - Creates actual tasks in Todoist with parsed content, priority level, and due date from AI analysis"
    },
    {
      "parameters": {
        "chatId": "={{ $('Receive Telegram Messages').item.json.message.chat.id }}",
        "text": "=Task : {{ $json.content }} Task Link :{{ $json.url }}",
        "additionalFields": {
          "appendAttribution": false
        }
      },
      "id": "d65e0cfc-1e6f-4915-8643-9905b85ad356",
      "name": "üì§ Success Notifier - by Brijesh",
      "type": "n8n-nodes-base.telegram",
      "position": [
        -3264,
        -176
      ],
      "webhookId": "5699aecd-e061-4b7f-af7b-4a23eb7201c6",
      "typeVersion": 1.2,
      "notes": "Confirmation sender by Brijesh - Sends success message back to user with task details and Todoist link"
    },
    {
      "parameters": {
        "model": "google/gemini-2.5-flash-lite-preview-06-17",
        "options": {}
      },
      "type": "@n8n/n8n-nodes-langchain.lmChatOpenRouter",
      "typeVersion": 1,
      "position": [
        -4032,
        224
      ],
      "id": "fc883b6c-0533-4f71-b003-cba55ffb6eca",
      "name": "ü§ñ Gemini AI Brain - by Brijesh",
      "notes": "AI model by Brijesh - Google Gemini 2.5 Flash via OpenRouter for intelligent task parsing and natural language understanding"
    },
    {
      "parameters": {
        "method": "POST",
        "url": "https://api-inference.huggingface.co/models/openai/whisper-large-v3",
        "sendHeaders": true,
        "headerParameters": {
          "parameters": [
            {
              "name": "Authorization",
              "value": "Bearer YOUR_HUGGINGFACE_API_TOKEN"
            },
            {
              "name": "Content-Type",
              "value": "audio/ogg"
            },
            {
              "name": "Accept",
              "value": "application/json"
            }
          ]
        },
        "sendBody": true,
        "contentType": "binaryData",
        "inputDataFieldName": "data",
        "options": {}
      },
      "type": "n8n-nodes-base.httpRequest",
      "typeVersion": 4.2,
      "position": [
        -4224,
        -176
      ],
      "id": "a40e1880-13d1-435a-926e-057e3bf73c38",
      "name": "üé§ Direct Voice Processor - by Brijesh",
      "notes": "Primary transcriber by Brijesh - Main voice-to-text conversion using HuggingFace Whisper API directly on OGG files"
    }
  ],
  "pinData": {},
  "connections": {
    "üß† AI Task Parser - by Brijesh": {
      "main": [
        [
          {
            "node": "‚úÖ Todoist Creator - by Brijesh",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üîÄ Message Router - by Brijesh": {
      "main": [
        [
          {
            "node": "üéôÔ∏è Voice Fetcher - by Brijesh",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üéôÔ∏è Voice Fetcher - by Brijesh": {
      "main": [
        [
          {
            "node": "üé§ Direct Voice Processor - by Brijesh",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üìã Task Structurer - by Brijesh": {
      "ai_outputParser": [
        [
          {
            "node": "üß† AI Task Parser - by Brijesh",
            "type": "ai_outputParser",
            "index": 0
          }
        ]
      ]
    },
    "‚úÖ Todoist Creator - by Brijesh": {
      "main": [
        [
          {
            "node": "üì§ Success Notifier - by Brijesh",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "üì± Telegram Listener - by Brijesh": {
      "main": [
        [
          {
            "node": "üîÄ Message Router - by Brijesh",
            "type": "main",
            "index": 0
          }
        ]
      ]
    },
    "ü§ñ Gemini AI Brain - by Brijesh": {
      "ai_languageModel": [
        [
          {
            "node": "üß† AI Task Parser - by Brijesh",
            "type": "ai_languageModel",
            "index": 0
          },
          {
            "node": "üìã Task Structurer - by Brijesh",
            "type": "ai_languageModel",
            "index": 0
          }
        ]
      ]
    },
    "üé§ Direct Voice Processor - by Brijesh": {
      "main": [
        [
          {
            "node": "üß† AI Task Parser - by Brijesh",
            "type": "main",
            "index": 0
          }
        ]
      ]
    }
  },
  "active": false,
  "settings": {
    "executionOrder": "v1"
  },
  "versionId": "5fd50670-f26c-4e1e-9ce5-e92937962c2a",
  "meta": {
    "instanceId": "8780bebf542c8c845560e0f4e1c39515c230b7989ee78caa812b141c0736572e"
  },
  "id": "LXlWlvrFyMwiTKFl",
  "tags": []
}